<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Open BCI Web GUI</title>

    <script src="/jquery-1.9.1.min.js"></script>

    <link href="/bootstrap.min.css" rel="stylesheet">
    <script src="/bootstrap.bundle.min.js"></script>

    <link href="/index.css" rel="stylesheet">
    <script src="/global.js"></script>
</head>
<body class="bg-dark text-light">

<div class="container text-center">
    <div id="navbar"></div>

    <div class="container">
        <table class="table table-striped table-hover table-bordered text-light bg-dark">
            <thead>
                <tr>
                    <th scope="col">Channel</th>
                    <th scope="col">Action</th>
                    <th scope="col">Action Type</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
</div>

</body>
</html>
<script>
    function main() {
        setup();
        fillTable();
    }

    function fillTable() {
        const channels = getChannels();

        for (const channel of channels) {
            $("tbody").append(`
<tr>
    <th scope="col" class="text-light">${channel.id}</th>
    <th scope="col" class="text-light">${getActionDropdown(channel.action)}</th>
    <th scope="col" class="text-light">${getActionTypeDropdown(channel.action_type)}</th>
</tr>`);
        }
    }

    function getActionDropdown(action) {
        let dropMenu = '';
        const alphabet = "abcdefghijklmnopqrstuvwxyz123456789";
        let keys = ['backspace','delete','tab','enter','escape','up','down','right','left','home','end','pageup','pagedown',
            'f1','f2','f3','f4','f5','f6','f7','f8','f9','f10','f11','f12','command','alt','control','shift','right_shift','space','printscreen','insert'];
        for (let i = 0; i < alphabet.length; i++) dropMenu += `<li><a class="dropdown-item" href="#">${alphabet.substring(i, i + 1).toUpperCase()}</a></li>`
        for (let i = 0; i < keys.length; i++) dropMenu += `<li><a class="dropdown-item" href="#">${keys[i]}</a></li>`
        return `
<div class="dropdown">
    <a class="nav-link dropdown-toggle text-light" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        ${action}
    </a>
    <ul class="dropdown-menu">
        ${dropMenu}
    </ul>
</div>`
    }

    function getActionTypeDropdown(actionType) {
        let dropMenu = '';
        let keys = ['tap', 'toggle', 'feather'];
        for (let i = 0; i < keys.length; i++) dropMenu += `<li><a class="dropdown-item" href="#">${keys[i]}</a></li>`
        return `
<div class="dropdown">
    <a class="nav-link dropdown-toggle text-light" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
        ${actionType}
    </a>
    <ul class="dropdown-menu">
        ${dropMenu}
    </ul>
</div>`
    }

    $(document).ready(main);
</script>